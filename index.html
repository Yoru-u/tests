<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Static URL Shortener</title>
</head>
<body>
    <h1>Static URL Shortener</h1>
    <form id="url-form">
        <label for="url">Enter your long URL:</label>
        <input type="text" id="url" required>
        <button type="submit">Shorten URL</button>
    </form>
    
    <h2>Shortened URL</h2>
    <p id="short-url"></p>

    <h3>Use this shortened link:</h3>
    <input type="text" id="generated-link" readonly>

    <script>
        // Generate a random short URL code
        function generateShortCode() {
            const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
            let shortCode = "";
            for (let i = 0; i < 6; i++) {
                shortCode += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return shortCode;
        }

        // Save the URL mapping in local storage
        function saveURLMapping(shortCode, longUrl) {
            let urlMappings = JSON.parse(localStorage.getItem("urlMappings")) || {};
            urlMappings[shortCode] = longUrl;
            localStorage.setItem("urlMappings", JSON.stringify(urlMappings));
        }

        // Handle the form submission to create the shortened URL
        document.getElementById('url-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const longUrl = document.getElementById('url').value;
            const shortCode = generateShortCode();
            const shortUrl = `http://127.0.0.1:5500/${shortCode}`; // You can replace this with your actual domain if deployed

            // Save the mapping in localStorage
            saveURLMapping(shortCode, longUrl);

            // Display the shortened URL
            document.getElementById('short-url').textContent = shortUrl;
            document.getElementById('generated-link').value = shortUrl;
        });

        // Handle the short link redirection
        window.onload = function() {
            const path = window.location.pathname.substring(1);
            const urlMappings = JSON.parse(localStorage.getItem("urlMappings")) || {};

            if (urlMappings[path]) {
                window.location.href = urlMappings[path]; // Redirect to the original URL
            }
        }
    </script>
</body>
</html>
